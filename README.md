# 코코두기 [기업협약 프로젝트]
![CocoDoogy Img](https://github.com/user-attachments/assets/67e5c563-42a1-46b3-be0c-827df09dee81)

<br>

**코코두기 설명 영상**  
https://youtu.be/tYxrHUkVdto

**맵 에디터 영상**  
https://youtu.be/dpCA9EOCIJI

---

## 1. 프로젝트 개요

**코코두기**는 소코반 규칙을 기반으로 한 **그리드 퍼즐 게임**으로,  
플레이어 이동과 다양한 환경·상호작용 기믹을 결합한 **3D 모바일 퍼즐 게임**입니다.

- 플랫폼: Android  
- 개발 엔진: Unity 6  
- 개발 기간: 2025.10.16 ~ 2025.12.09  
- 프로젝트 성격: 기업협약 팀 프로젝트 (개발 6명 / 기획 4명)

---

## 2. 주요 기능

> 본 README에는 팀 프로젝트 중 **본인이 직접 설계·구현·개선한 시스템만**을 정리했습니다.

**[김현지 개발 파트]**

### 2.1 조이스틱 & 플레이어 이동 시스템
- 모바일 환경에 맞춘 가상 조이스틱 입력 시스템 구현
- 터치 손가락 수에 따라 입력 분기
  - 한 손가락 드래그: 플레이어 이동
  - 두 손가락 드래그: 카메라 이동
- UI Raycast 기반 입력 차단 처리로 UI 조작 중 의도치 않은 이동 방지
- 4방향 스냅 입력을 우선 인식하여 퍼즐 조작 안정성 확보
- Strategy Pattern을 활용해 이동 / 밀기 / 환경 상호작용 로직 분리 설계


### 2.2 PushableObjects 기반 퍼즐 오브젝트 시스템
- 모든 이동 판단을 PushableObjects 단일 파이프라인으로 통합
- Push / Flow / Shockwave 등 입력 방식만 다르고 동일한 이동 규칙을 공유하도록 구조 설계
- 이동과 낙하를 `MoveAndFall()`로 통합 처리하여 규칙 누락 방지
- 상단 적층 오브젝트 자동 동기화 처리


### 2.3 멧돼지 기믹
- 플레이어 입력 방향을 기반으로 돌진하는 이동형 기믹 구현
- 매 칸 전방 검증을 통해 지면 부재 / 차단 조건 발생 시 즉시 중단
- PushableObject 체인을 수집하여 조건이 유효할 때만 전체를 동시에 1칸 이동
- 수평 체인과 수직 적층 구조를 함께 처리하여 퍼즐 영향 범위를 안정적으로 제어


### 2.4 거북이 기믹 (빙판 이동 + 탑승)
- 빙판 규칙 기반 연속 이동 기믹 구현
- 전방을 반복 검사해 충돌 직전 지점을 목표 지점으로 설정
- 이동 중 상단 오브젝트(Player / Pushables)를 부모-자식 구조로 묶어 탑승 동기화
- 이동 종료 시 적층 구조를 유지한 채 상태 복원


### 2.5 흐르는 물(Flow) 환경 기믹
- 물 타일 위 오브젝트를 탐색하는 환경 기믹 구현
- 이동 판단은 PushableObjects가 담당하고, Flow는 이동 트리거만 전달하도록 역할 분리
- `IFlowStrategy` 기반 설계로 환경 기믹과 이동 로직 간 결합도 최소화


### 2.6 충격파 & 버팔로 기믹
- 충격파를 발생시키는 고정형 퍼즐 기믹 구현
- 반경, 기준 층, 차폐(Line Occlusion) 검사를 통해 실제 영향 대상만 선별
- 동일 좌표에 적층된 오브젝트를 하나의 충격 그룹으로 처리
- 면역 시간 및 오버라이드 구조로 연쇄 충격 안정성 확보


### 2.7 철구(Iron Ball) 기믹
- 착지 시 충격파를 발생시키는 PushableObject 확장 기믹 구현
- FixedUpdate 기반 착지 판정
- 충격 범위를 RingRange로 시각화
- 주변 충격 감지탑으로 Ping 이벤트 전달


### 2.8 시그널 기반 기믹 시스템 (감지탑 / 터렛 / 문)
- 송·수신 구조의 인터페이스 기반 기믹 시스템 설계
- 충격 이벤트 → 신호 전달 → 기믹 반응 구조 구현
- 쿨타임 및 Raycast 차폐 검사로 연쇄 신호 전파 제어
- 기믹별 동작 차이는 Receiver 내부 구현으로 분리


### 2.9 보물 시스템 & UI 연동
- 기존 파티클 기반 연출을 Shader 기반 시각 효과 구조로 개선
- 스테이지 데이터 기반으로 이미 획득한 보물 여부를 Start 시점에 판별
- 중복 획득 시 별도 UI 팝업 제공 및 자동 종료 코루틴 처리


### 2.10 카메라 시스템 개선
- 거리 기반 이동 방식에서 발생하던 속도 불균형 문제 개선
- 일정 속도 기반 카메라 워킹 방식으로 수정
- 플레이어 추적 / 둘러보기 상태 분리 관리


### 2.11 게임 정보(도움말) UI
- CSV 기반 매뉴얼 데이터를 불러와 도움말 UI를 동적으로 생성
- 탭 선택 상태를 시각적으로 강조하여 UX 명확성 개선


### 2.12 빌드 버전 자동 관리 시스템
- Unity 빌드 파이프라인에 Editor 스크립트를 연결하여  
  **빌드 시점마다 게임 버전이 자동으로 증가**하도록 구현
- `PlayerSettings.bundleVersion (Major.Minor.Patch)` 구조를 기준으로  
  Patch → Minor → Major 순으로 자동 승급
- 수동 버전 수정으로 인한 실수를 방지하고,  
  빌드 결과물의 버전 이력을 일관되게 관리

---

## 3. 기술 스택
- C#
- Unity
- GitHub (Fork 기반 형상 관리)

---

## 4. 설계 포인트 요약
- Strategy / Interface 기반 설계로 기믹 간 결합도 최소화
- 퍼즐 규칙의 일관성과 안정성을 최우선으로 고려
- 모바일 환경 특성을 고려한 입력 / 카메라 / UI 흐름 설계
